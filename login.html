<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>登录 - 于洋小店</title>
  <link rel="stylesheet" href="css/blog.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=LXGW+WenKai&display=swap" rel="stylesheet">
</head>
<body>
  <div class="tb-top-util">
    <div class="tb-wrap">
      <span class="tb-welcome">欢迎来到于洋小店</span>
      <div class="tb-util-links">
        <span id="loginArea"><a href="login.html">登录</a></span>
        <span id="logoutArea" style="display:none"><span id="welcomeUser"></span> <a href="#" id="logoutBtn">退出</a></span>
        <a href="index.html">首页</a>
        <a href="products.html">全部商品</a>
        <a href="cart.html">购物车</a>
        <a href="about.html">关于我们</a>
      </div>
    </div>
  </div>

  <header class="tb-header">
    <div class="tb-wrap tb-header-inner">
      <a href="index.html" class="tb-logo">于洋小店</a>
      <form class="tb-search" action="products.html" method="get" role="search">
        <input type="text" name="q" placeholder="搜索商品" />
        <button type="submit" class="tb-search-btn">搜索</button>
      </form>
      <a href="cart.html" class="tb-cart">
        购物车
        <span class="tb-cart-badge js-cart-count">0</span>
      </a>
    </div>
  </header>

  <nav class="tb-nav">
    <div class="tb-wrap">
      <a href="index.html" class="tb-nav-item">首页</a>
      <a href="products.html" class="tb-nav-item">全部商品</a>
      <a href="cart.html" class="tb-nav-item">购物车</a>
      <a href="about.html" class="tb-nav-item">关于我们</a>
    </div>
  </nav>

  <main class="tb-main">
    <section class="tb-content">
      <div class="tb-wrap tb-login-wrap">
        <h3 class="tb-section-title">登录</h3>
        <p class="tb-login-hint">本站为静态演示，登录信息仅保存在浏览器本地，无后端验证。</p>
        <form class="tb-login-form card" id="loginForm">
          <div class="field">
            <label for="loginName">用户名</label>
            <input type="text" id="loginName" class="input" placeholder="请输入用户名" required autocomplete="username">
          </div>
          <div class="field">
            <label for="loginPwd">密码</label>
            <input type="password" id="loginPwd" class="input" placeholder="选填，仅演示" autocomplete="current-password">
          </div>
          <button type="submit" class="btn btn-primary">登录</button>
        </form>
        <p class="tb-login-back"><a href="index.html">← 返回首页</a></p>
      </div>
    </section>
  </main>

  <footer class="tb-footer">
    <div class="tb-wrap">
      <p>© 2025 于洋小店 · 托管于 <a href="https://pages.github.com/">GitHub Pages</a></p>
    </div>
  </footer>

  <script src="js/store.js"></script>
  <script src="js/auth.js"></script>
  <script>
    updateCartCount();
    updateLoginUI();
    document.getElementById('loginForm').onsubmit = function (e) {
      e.preventDefault();
      var name = (document.getElementById('loginName').value || '').trim();
      if (!name) {
        alert('请输入用户名');
        return;
      }
      setLoginUser({ name: name });
      var returnUrl = (new URLSearchParams(window.location.search)).get('return') || 'index.html';
      window.location.href = returnUrl;
    };
  </script>
</body>
</html>
